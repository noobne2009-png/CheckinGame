<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ƒêi·ªÉm danh nh·∫≠n t√†i kho·∫£n game</title>
    <style>
      body {
        background: linear-gradient(135deg, #0d1117, #1a1f2b);
        color: white;
        font-family: "Segoe UI", sans-serif;
        text-align: center;
        padding: 40px;
      }
      h1 {
        color: #00ffff;
        text-shadow: 0 0 15px #00ffff;
      }
      button {
        background: #00bfff;
        color: white;
        padding: 15px 25px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 18px;
        transition: 0.2s;
      }
      button:hover {
        background: #0080ff;
        box-shadow: 0 0 15px #00ffff;
      }
      .result {
        margin-top: 30px;
        font-size: 18px;
      }
      .acc-box {
        background: #111;
        padding: 15px;
        border-radius: 8px;
        margin-top: 10px;
        font-family: monospace;
      }
      a {
        color: #00ffff;
      }
    </style>
  </head>
  <body>
    <h1>üíé ƒêi·ªÉm danh nh·∫≠n t√†i kho·∫£n game random</h1>
    <button onclick="checkIn()">‚úÖ ƒêi·ªÉm danh ngay</button>
    <div class="result" id="result"></div>

    <script>
      // ‚úÖ T·∫°o deviceId duy nh·∫•t
      function getDeviceId() {
        let id = localStorage.getItem("deviceId");
        if (!id) {
          id = "dev-" + Math.random().toString(36).substring(2, 15);
          localStorage.setItem("deviceId", id);
        }
        return id;
      }

      // ‚úÖ G·ª≠i y√™u c·∫ßu ƒëi·ªÉm danh
      async function checkIn() {
        const resultDiv = document.getElementById("result");

        const res = await fetch("/checkin", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ deviceId: getDeviceId() }),
        });

        const data = await res.json();

        if (!data.ok) {
          resultDiv.innerHTML = `<p style="color:red;">${data.message}</p>`;
          return;
        }

        resultDiv.innerHTML = `
          <p>üéÅ T√†i kho·∫£n c·ªßa b·∫°n:</p>
          <div class="acc-box" id="accBox">${data.account}</div>
          <button onclick="copyAcc()">üìã Sao ch√©p</button>
          <p>Tham gia nh√≥m Telegram: 
            <a href="${data.telegram}" target="_blank">${data.telegram}</a>
          </p>
        `;
      }

      function copyAcc() {
        const text = document.getElementById("accBox").innerText;
        navigator.clipboard.writeText(text);
        alert("‚úÖ ƒê√£ sao ch√©p t√†i kho·∫£n!");
      }
    </script>
  </body>
</html>
